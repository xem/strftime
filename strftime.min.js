strftime=function(e,b,d,c,a,l,s){b&&b.AM&&(d=b,b=new Date);b=b||new Date;d=d||{days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],AM:"AM",PM:"PM",am:"am",pm:"pm"};a="";for(i=0,l=e.length;i<l;i++)if("%"===e[i])switch(i++,s=e[i],s){case "A":a+=d.days[b.getDay()]; break;case "a":a+=d.shortDays[b.getDay()];break;case "B":a+=d.months[b.getMonth()];break;case "b":case "h":a+=d.shortMonths[b.getMonth()];break;case "C":a+=("0"+~~(b.getFullYear()/100)).slice(-2);break;case "D":a+=("0"+(b.getMonth()+1)).slice(-2)+"/"+("0"+b.getDate()).slice(-2)+"/"+(""+b.getFullYear()).slice(-2);break;case "d":a+=("0"+b.getDate()).slice(-2);break;case "e":a+=(" "+b.getDate()).slice(-2);break;case "F":a+=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2); break;case "H":a+=("0"+b.getHours()).slice(-2);break;case "I":a+=("0"+b.getHours()%12).slice(-2);break;case "j":a+=("00"+~~(b-new Date(b.getFullYear(),0,0)/864E5)).slice(-3);break;case "k":a+=(" "+b.getHours()).slice(-2);break;case "L":a+=("00"+b.getMilliseconds()).slice(-3);break;case "l":a+=(" "+b.getHours()%12).slice(-2);break;case "M":a+=("0"+b.getMinutes()).slice(-2);break;case "m":a+=("0"+(b.getMonth()+1)).slice(-2);break;case "n":a+="\n";break;case "o":c=b.getDate();a+=c;a=1===c%10?a+"st": 2===c%10?a+"nd":3===c%10?a+"rd":a+"th";break;case "P":a+=12>b.getHours()?d.am:d.pm;break;case "p":a+=12>b.getHours()?d.AM:d.PM;break;case "R":a+=("0"+b.getHours()).slice(-2)+":"+("0"+b.getMinutes()).slice(-2);break;case "r":a+=("0"+b.getHours()%12).slice(-2)+":"+("0"+b.getMinutes()).slice(-2)+":"+("0"+b.getSeconds()).slice(-2)+" "+(12>b.getHours()?d.AM:d.PM);break;case "S":a+=("0"+b.getSeconds()).slice(-2);break;case "s":a+=~~(b.getTime()/1E3);break;case "T":a+=("0"+b.getHours()).slice(-2)+":"+("0"+ b.getMinutes()).slice(-2)+":"+("0"+b.getSeconds()).slice(-2);break;case "t":a+="\t";break;case "U":c=new Date(b.getFullYear(),0,1);a+=("0"+Math.ceil(((b-c)/864E5+c.getDay())/7)).slice(-2);break;case "u":c=b.getDay();a+=c?c+1:7;break;case "v":a+=(" "+b.getDate()).slice(-2)+"-"+d.shortMonths[b.getMonth()]+"-"+b.getFullYear();break;case "W":c=new Date(b.getFullYear(),0,1);a+=("0"+Math.ceil(((b-c)/864E5+c.getDay()+1)/7)).slice(-2);break;case "w":a+=b.getDay();break;case "Y":a+=b.getFullYear();break;case "y":a+= (""+b.getFullYear()).slice(-2);break;case "z":c=-b.getTimezoneOffset(),a+=(0>c?"-":"+")+("0"+Math.abs(c/60)).slice(-2)+("0"+c%60).slice(-2)}else a+=e[i];return a}